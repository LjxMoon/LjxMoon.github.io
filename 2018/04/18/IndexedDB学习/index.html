<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  IndexedDB&#x5B66;&#x4E60;&#x7B14;&#x8BB0; |   DrMoon&apos;s Blog </title>

 
  
    <link rel="icon" href="/images/title.ico">
  


  <link rel="stylesheet" href="/nayo.min.css"> 
</head>  
  <body>   
    
      <header class="header">
	
  <nav class="header-nav">        
   
    <span class="iconfont icon-menu mobile-toggle"></span>   	

    <a class="header-logo" href="/">DrMoon&apos;s Blog</a>  

    <div class="header-menu">          
              
            

              <a class="header-menu-link" id="header-menu-home" href="/">Home</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-archives" href="/archives">Archives</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-tags" href="/tags">Tags</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-about" href="/about">About</a>     

            
            
            

              <a class="iconfont icon-menu-search header-menu-link" id="header-menu-search"></a>

            
                
    </div>  
    
  </nav>
</header>   

      <div class="container">       
          
          
            <section class="main">  
          

          <article class="post">
  
	<div class="post-header">

	<p class="post-title">	
		IndexedDB&#x5B66;&#x4E60;&#x7B14;&#x8BB0;
	</p>
			

	<div class="meta-info">	
	<span>
		Apr 18, 2018
	</span>

	
	
		<i class="iconfont icon-words"></i>
		<span>
			16208
		</span>
	
</div>

</div> 
	 

	  <div class="post-content slideDownMin">

		

		
	  		<h1 id="IndexedDB&#x5B66;&#x4E60;&#x7B14;&#x8BB0;"><a href="#IndexedDB&#x5B66;&#x4E60;&#x7B14;&#x8BB0;" class="headerlink" title="IndexedDB&#x5B66;&#x4E60;&#x7B14;&#x8BB0;"></a>IndexedDB&#x5B66;&#x4E60;&#x7B14;&#x8BB0;</h1><h2 id="&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;"><a href="#&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;"></a>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = IndexedDB.open(<span class="string">&apos;dbName&apos;</span>, version)</span><br></pre></td></tr></table></figure>
<p>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;<code>dbName</code> &#x662F;&#x6570;&#x636E;&#x5E93;&#x540D;&#xFF0C;<code>version</code> &#x662F;&#x6570;&#x636E;&#x5E93;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x7248;&#x672C;&#x53F7;&#x5FC5;&#x987B;&#x4E3A;&#x6574;&#x6570;&#x3002;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x4E00;&#x4E2A; <code>IDBOpenDBRquest</code> &#x5BF9;&#x8C61;&#xFF0C;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BF7;&#x6C42;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5BF9;&#x8C61;&#x7684; <code>onsuccess</code> &#x548C; <code>onerror</code> &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x6765;&#x5B9A;&#x4E49;&#x8FDE;&#x63A5;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x540E;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = IndexedDB.open(<span class="string">&apos;test&apos;</span>, <span class="number">1</span>)</span><br><span class="line">request.onsuccess = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x6210;&#x529F;&#xFF01;&apos;</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x6210;&#x529F;&#x540E;&#x6267;&#x884C;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = IndexedDB.open(<span class="string">&apos;test&apos;</span>, <span class="number">1</span>)</span><br><span class="line">request.onerror = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x5931;&#x8D25;&#xFF01;&apos;</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x5931;&#x8D25;&#x540E;&#x6267;&#x884C;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = IndexedDB.open(<span class="string">&apos;test&apos;</span>, <span class="number">2</span>)</span><br><span class="line">request.onupgradeneeded = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;&#x6570;&#x636E;&#x5E93;&#x5F53;&#x524D;&#x7248;&#x672C;&#x4E3A;&#xFF1A;&apos;</span> + e.newVersion)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6570;&#x636E;&#x5E93;&#x66F4;&#x65B0;&#x540E;&#x6267;&#x884C;&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x5728;&#x5BF9;indexedDB&#x7684;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x672C;&#x8EAB;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6570;&#x636E;&#x5E93;&#x7248;&#x672C;&#x53F7;&#x66F4;&#x65B0;&#x65F6;&#x624D;&#x4F1A;&#x521B;&#x5EFA;&#x7684; <code>ongradeneeded</code> &#x4E8B;&#x4EF6;&#x4E2D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<h2 id="&#x5EFA;&#x7ACB;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;"><a href="#&#x5EFA;&#x7ACB;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;" class="headerlink" title="&#x5EFA;&#x7ACB;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;"></a>&#x5EFA;&#x7ACB;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = IndexedDB.open(<span class="string">&apos;test&apos;</span>, <span class="number">3</span>)</span><br><span class="line">request.onupgradeneeded = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">const</span> db = e.target.result</span><br><span class="line">  <span class="keyword">const</span> store = db.createObjectStore(<span class="string">&apos;User&apos;</span>, {</span><br><span class="line"> keyPath: <span class="string">&apos;userId&apos;</span>,</span><br><span class="line"> autoIncrement: <span class="literal">false</span>,</span><br><span class="line">  })</span><br><span class="line">  <span class="keyword">const</span> idx = store.createIndex(<span class="string">&apos;userNameIndex&apos;</span>, <span class="string">&apos;userName&apos;</span>, {</span><br><span class="line"> unique: <span class="literal">false</span></span><br><span class="line">  })</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x6210;&#x529F;&#xFF01;&apos;</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><code>createObjectStore</code> &#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E00;&#x4E2A;&#x8868;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x8BE5;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x7684;&#x540D;&#x5B57;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x4E2D; <code>keyPath</code> &#x662F;&#x8BE5;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x7684;&#x4E3B;&#x952E;&#xFF0C;<code>autoIncrement</code> &#x4E3A;&#x662F;&#x5426;&#x8981;&#x6C42;&#x8BE5;&#x4E3B;&#x952E;&#x81EA;&#x589E;&#xFF0C;<code>false</code> &#x5373;&#x4E3A;&#x4E0D;&#x5141;&#x8BB8;&#x4E3B;&#x952E;&#x81EA;&#x589E;&#xFF0C;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x65F6;&#x81EA;&#x5DF1;&#x4F20;&#x5165;&#x3002;</li>
</ul>
<p><code>createIndex</code> &#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x7D22;&#x5F15;&#x540D;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x4E3A;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528; <code>userName</code> &#x5C5E;&#x6027;&#x6765;&#x521B;&#x5EFA;&#x7D22;&#x5F15;&#xFF1B;</li>
<li>&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x53EF;&#x9009;&#x53C2;&#x6570;&#xFF0C;&#x503C;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;&#x5BF9;&#x8C61;&#x4E2D;&#x7684; <code>unique</code> &#x5C5E;&#x6027;&#x4E3A; <code>true</code> &#xFF0C;&#x4EE3;&#x8868;&#x7D22;&#x5F15;&#x503C;&#x4E0D;&#x53EF;&#x4EE5;&#x76F8;&#x540C;&#xFF0C;&#x5373;&#x4E24;&#x6761;&#x6570;&#x636E;&#x7684; <code>userName</code> &#x4E0D;&#x53EF;&#x4EE5;&#x76F8;&#x540C;&#xFF0C;&#x4E3A; <code>false</code> &#x8868;&#x793A;&#x53EF;&#x4EE5;&#x76F8;&#x540C;&#x3002;</li>
</ul>
<h2 id="&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;"><a href="#&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;" class="headerlink" title="&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;"></a>&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;</h2><h3 id="&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;"><a href="#&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;"></a>&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;</h3><ul>
<li><strong>add()</strong>&#xFF1A;&#x65B0;&#x589E;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x53D7;&#x8981;&#x65B0;&#x589E;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x82E5;&#x53C2;&#x6570;&#x5BF9;&#x8C61;&#x7684;&#x4E3B;&#x952E;&#x5728;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x5DF2;&#x5B58;&#x5728;&#xFF0C;&#x4F1A;&#x65B0;&#x589E;&#x5931;&#x8D25;&#x3002;</li>
<li><strong>put()</strong>&#xFF1A;&#x65B0;&#x589E;&#x6216;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x53D7;&#x8981;&#x65B0;&#x589E;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x82E5;&#x53C2;&#x6570;&#x5BF9;&#x8C61;&#x7684;&#x4E3B;&#x952E;&#x5728;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x5DF2;&#x5B58;&#x5728;&#xFF0C;&#x4F1A;&#x53D8;&#x4E3A;&#x66F4;&#x65B0;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;</li>
<li><strong>get()</strong>&#xFF1A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x53D7;&#x8981;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x4E3B;&#x952E;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x3002;</li>
<li><strong>delete()</strong>&#xFF1A;&#x5220;&#x9664;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x53D7;&#x8981;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x4E3B;&#x952E;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x3002;</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = indexedDB.open(<span class="string">&apos;test&apos;</span>, <span class="number">3</span>)</span><br><span class="line">request.onsuccess = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x6210;&#x529F;&#xFF01;&apos;</span>)</span><br><span class="line">  <span class="keyword">const</span> db = e.target.result</span><br><span class="line">  <span class="keyword">const</span> tx = db.transaction(<span class="string">&apos;User&apos;</span>,<span class="string">&apos;readwrite&apos;</span>)</span><br><span class="line">  <span class="keyword">const</span> store = tx.objectStore(<span class="string">&apos;User&apos;</span>)</span><br><span class="line">  <span class="keyword">const</span> value = {</span><br><span class="line"> <span class="string">&apos;userId&apos;</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">&apos;userName&apos;</span>: <span class="string">&apos;Luke&apos;</span>,</span><br><span class="line"> <span class="string">&apos;age&apos;</span>: <span class="number">18</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">const</span> req1 = store.put(value)</span><br><span class="line">  <span class="keyword">const</span> req2 = store.get(<span class="number">1</span>)</span><br><span class="line">  req2.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="keyword">this</span>.result)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">const</span> req3 = store.delete(<span class="number">1</span>)</span><br><span class="line">  req3.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) =&gt; </span>{</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&apos;&#x6570;&#x636E;&#x5220;&#x9664;&#x6210;&#x529F;&#xFF01;&apos;</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><code>transaction</code> &#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x6570;&#x7EC4;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#x8BE5;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x662F;&#x6570;&#x7EC4;&#x65F6;&#x8BE5;&#x53C2;&#x6570;&#x662F;&#x7531;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x540D;&#x7EC4;&#x6210;&#x7684;&#x6570;&#x7EC4;&#xFF0C;<code>transaction</code> &#x53EF;&#x4EE5;&#x5BF9;&#x53C2;&#x6570;&#x4E2D;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x6A21;&#x5F0F;&#xFF0C;&#x4F20;&#x5165; <code>readonly</code> &#x8868;&#x793A;&#x53EA;&#x80FD;&#x5BF9;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x8FDB;&#x884C;&#x8BFB;&#x64CD;&#x4F5C;&#xFF0C;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#x3002;&#x4F20;&#x5165; <code>readwrite</code> &#x65F6;&#x8868;&#x793A;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<h3 id="&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x503C;&#x67E5;&#x8BE2;&#x6570;&#x636E;"><a href="#&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x503C;&#x67E5;&#x8BE2;&#x6570;&#x636E;" class="headerlink" title="&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x503C;&#x67E5;&#x8BE2;&#x6570;&#x636E;"></a>&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x503C;&#x67E5;&#x8BE2;&#x6570;&#x636E;</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> index = store.index(<span class="string">&apos;userNameIndex&apos;</span>)</span><br><span class="line">index.get(<span class="string">&apos;DrMoon&apos;</span>).onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.result)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x4F7F;&#x7528;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x65F6;&#x5B9A;&#x4E49;&#x7684;&#x7D22;&#x5F15;&#x6765;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#xFF1A;</p>
<ul>
<li>&#x9996;&#x5148;&#x8981;&#x4F7F;&#x7528; <code>index</code> &#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x9879;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x7D22;&#x5F15;&#x9879;&#x9700;&#x662F;&#x4E4B;&#x524D;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7D22;&#x5F15;&#x65F6;&#x91C7;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x540D;&#xFF0C;&#x5373; <code>createIndex</code> &#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF1B;</li>
<li>&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x521A;&#x624D;&#x5B9A;&#x4E49;&#x7684;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x5BF9;&#x8C61;&#x7684; <code>get</code> &#x65B9;&#x6CD5;&#x6765;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<h3 id="&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x6765;&#x67E5;&#x8BE2;&#x6570;&#x636E;"><a href="#&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x6765;&#x67E5;&#x8BE2;&#x6570;&#x636E;" class="headerlink" title="&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x6765;&#x67E5;&#x8BE2;&#x6570;&#x636E;"></a>&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x6765;&#x67E5;&#x8BE2;&#x6570;&#x636E;</h3><p>&#x4F7F;&#x7528; <code>get</code> &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6570;&#x636E;&#x7684;&#x4E3B;&#x952E;&#x503C;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x83B7;&#x53D6;&#x5355;&#x4E2A;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x82E5;&#x60F3;&#x67E5;&#x8BE2;&#x8303;&#x56F4;&#x6570;&#x503C;&#x5185;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x7684; <code>openCursor</code> &#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5B9A;&#x4E49;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x76EE;&#x6807;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>IDBKeyRange</code> &#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x5B9A;&#x4E49;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#xFF1A;<ul>
<li><strong>IDBKeyRange.bound(1, 10, false, false)</strong> &#xFF1A;<br><code>bound</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x56DB;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF1B;</li>
<li>&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x8868;&#x793A;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x8303;&#x56F4;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x5373;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E3A; <code>true</code> &#x8868;&#x793A;&#x4E0D;&#x5305;&#x542B;&#xFF0C;<code>false</code> &#x8868;&#x793A;&#x5305;&#x542B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code> &#xFF1B;</li>
<li>&#x7B2C;&#x56DB;&#x4E2A;&#x53C2;&#x6570;&#x8868;&#x793A;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x8303;&#x56F4;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5373;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E3A; <code>true</code> &#x8868;&#x793A;&#x4E0D;&#x5305;&#x542B;&#xFF0C;<code>false</code> &#x8868;&#x793A;&#x5305;&#x542B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code> &#x3002;</li>
</ul>
</li>
<li><strong>IDBKeyRange.only(1)</strong> &#xFF1A;<br><code>only</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x53EA;&#x5305;&#x542B;&#x5355;&#x4E2A;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x8303;&#x56F4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;<ul>
<li>&#x8BE5;&#x53C2;&#x6570;&#x5373;&#x4E3A;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;</li>
</ul>
</li>
<li><strong>IDBKeyRange.lowerBound(1, false)</strong>&#xFF1A;<br><code>lowerBound</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x5C0F;&#x4E8E;&#x67D0;&#x4E2A;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5B9A;&#x4E49;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x90FD;&#x8981;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x4E3B;&#x952E;&#x503C;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5B9A;&#x4E49;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x8303;&#x56F4;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x5373;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E3A; <code>true</code> &#x8868;&#x793A;&#x4E0D;&#x5305;&#x542B;&#xFF0C;<code>false</code> &#x8868;&#x793A;&#x5305;&#x542B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code> &#x3002;</li>
</ul>
</li>
<li><strong>IDBKeyRange.upperBound(10, false)</strong>&#xFF1A;<br><code>upperBound</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x5C0F;&#x4E8E;&#x67D0;&#x4E2A;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5B9A;&#x4E49;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x90FD;&#x8981;&#x5C0F;&#x4E8E;&#x8FD9;&#x4E2A;&#x4E3B;&#x952E;&#x503C;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5B9A;&#x4E49;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x8303;&#x56F4;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5373;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E3A; <code>true</code> &#x8868;&#x793A;&#x4E0D;&#x5305;&#x542B;&#xFF0C;<code>false</code> &#x8868;&#x793A;&#x5305;&#x542B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code> &#x3002;</li>
</ul>
</li>
</ul>
</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x65F6;&#x6E38;&#x6807;&#x7684;&#x8BFB;&#x53D6;&#x65B9;&#x5411;&#xFF1A;<ul>
<li><strong>next</strong>&#xFF1A;&#x6E38;&#x6807;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x6309;&#x4E3B;&#x952E;&#x503C;&#x5347;&#x5E8F;&#x6392;&#x5217;&#xFF0C;&#x4E3B;&#x952E;&#x503C;&#x76F8;&#x7B49;&#x7684;&#x6570;&#x636E;&#x90FD;&#x88AB;&#x8BFB;&#x53D6;&#x3002;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x4E3A;&#x8BE5;&#x503C;&#x3002;</li>
<li><strong>nextunique</strong>&#xFF1A;&#x6E38;&#x6807;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x6309;&#x4E3B;&#x952E;&#x503C;&#x5347;&#x5E8F;&#x6392;&#x5217;&#xFF0C;&#x4E3B;&#x952E;&#x503C;&#x76F8;&#x7B49;&#x7684;&#x6570;&#x636E;&#x53EA;&#x8BFB;&#x53D6;&#x7B2C;&#x4E00;&#x6761;&#x3002;</li>
<li><strong>prev</strong>&#xFF1A;&#x6E38;&#x6807;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x6309;&#x4E3B;&#x952E;&#x503C;&#x964D;&#x5E8F;&#x6392;&#x5217;&#xFF0C;&#x4E3B;&#x952E;&#x503C;&#x76F8;&#x7B49;&#x7684;&#x6570;&#x636E;&#x90FD;&#x88AB;&#x8BFB;&#x53D6;&#x3002;</li>
<li><strong>prevunique</strong>&#xFF1A;&#x6E38;&#x6807;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x6309;&#x4E3B;&#x952E;&#x503C;&#x964D;&#x5E8F;&#x6392;&#x5217;&#xFF0C;&#x4E3B;&#x952E;&#x503C;&#x76F8;&#x7B49;&#x7684;&#x6570;&#x636E;&#x53EA;&#x8BFB;&#x53D6;&#x7B2C;&#x4E00;&#x6761;&#x3002;</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> range = IDBKeyRange.bound(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> data = []</span><br><span class="line"><span class="keyword">let</span> req = store.openCursor(range, <span class="string">&apos;next&apos;</span>)</span><br><span class="line">req.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">  <span class="keyword">let</span> cursor = <span class="keyword">this</span>.result</span><br><span class="line">  <span class="keyword">if</span> (cursor) {</span><br><span class="line">    data.push(cursor.value)</span><br><span class="line">    cursor.continue()</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><code>openCursor</code> &#x65B9;&#x6CD5;&#x6839;&#x636E;&#x63A5;&#x6536;&#x7684;&#x53C2;&#x6570;&#x5BF9;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x6BCF;&#x67E5;&#x8BE2;&#x5230;&#x4E00;&#x6761;&#x6570;&#x636E;&#x56DE;&#x5C06;&#x8BE5;&#x6761;&#x6570;&#x636E;&#x7684;&#x7ED3;&#x679C;&#x63A8;&#x5165; <code>data</code> &#x6570;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; <code>continue</code> &#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x67E5;&#x8BE2;&#xFF0C;&#x76F4;&#x5230;&#x67E5;&#x8BE2;&#x7ED3;&#x675F;&#x540E;&#x5C06; <code>data</code> &#x6570;&#x7EC4;&#x6253;&#x5370;&#x51FA;&#x6765;&#x3002;&#x8FD9;&#x6837;&#x4FBF;&#x5B8C;&#x6210;&#x4E86;&#x5BF9;&#x8981;&#x6C42;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x8303;&#x56F4;&#x5185;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x67E5;&#x8BE2;&#x3002;</p>
<p>&#x82E5; <code>openCursor</code> &#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x7A7A;&#x6216;&#x8005; <code>null</code> &#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06;&#x5BF9;&#x8C61;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x67E5;&#x8BE2;&#x51FA;&#x6765;&#x3002;</p>
  	
				
	  </div>     
	  

	
<div class="post-meta">
      	

      
        <i class="iconfont icon-tag"></i>     
          <a class="tag-link" href="/tags/IndexedDB/">IndexedDB</a>    
      	
</div>





<div class="post-footer">
  <div class="pf-left">
      <img class="pf-avatar" src="/images/header.jpg">
      <p class="pf-des">DrMoon&apos;s Blog</p>
  </div>

  <div class="pf-right">           
      <div class="pf-links">
         
        
	
<script id="-mob-share" src="http://f1.webshare.mob.com/code/mob-share.js?appkey=21d601593a1de"></script>
	
	<span class="share-btn">
	<span class="iconfont icon-share"></span>
	</span>


	<div class="-mob-share sildeUpMin">
		   			             
            <a class="iconfont  icon-share-qq -mob-share-qq"></a>		
     	   			             
            <a class="iconfont  icon-share-weixin -mob-share-weixin"></a>		
     	   			             
            <a class="iconfont  icon-share-weibo -mob-share-weibo"></a>		
     	   			             
            <a class="iconfont  icon-share-douban -mob-share-douban"></a>		
     	   			             
            <a class="iconfont  icon-share-google -mob-share-google"></a>		
     	   
	</div>	

      </div>  
    <nav class="pf-paginator">
           
        
            
  </nav>   
  </div>
</div> 
	
	
</article>

          </section> 
      </div>            
    
    <a id="backTop">
      <span>
        <i class="iconfont icon-backtotop"></i>
      </span>
    </a> 

  
    

        
        <div class="search-container sildeUpMin">


            <div class="search-header">
            <input type="text" placeholder="Typing Something here." id="search-input" class="search-input">  
            <span class="search-cancel iconfont icon-cancel"></span>
          
            </div>
              
            <div id="search-result" class="search-result"></div>

        </div>
 

     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon" src="/images/title.ico">   
      

         
            

            <a class="mobile-menu-link" href="/">Home
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">Archives
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">Tags
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">About
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">Search </a>                 
            
         
      
</div>        
    


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?636802045446222199ae541e32c8133e"; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>





     
    




<footer id="footer">	    

		
		<div class="footer-copyright">
		&#xA9;
		
		2018		
	
		Lemon
		<br>

		Built By Theme
		<a href="https://github.com/Lemonreds/hexo-theme-Nayo" target="_blank">Nayo</a>	
		</div>			
	 
</footer>   

  

    <script src="/nayo.bundle.js"></script>           
  </body>        
</html>